name: 'js retry action'
author : |
  Wandalen <wandalen@obox.systems>
  dmvict <dm.vict.kr@gmail.com>
branding:
  icon: 'activity'
  color: 'white'
description: 'Retries an Github Action step on failure'
inputs:
  action:
    description: 'Github action name. Should be defined action or command, not both.'
    required: false
  command:
    description: 'Command to run. Should be defined action or command, not both.'
    required: false
  with:
    description: 'An options map for Github action'
    required: false
  current_path:
    description: 'Setup working directory for the action. Works with only commands. Default is `github.workspace` path.'
    required: false
  env_context:
    description: 'Pass context `env` into an external action. Action cannot resolve separate environments of workflow at the startup and provide all environments. If you need valid context `env`, then add option `env_context` with environments.'
    required: false
    default: '{}'
  github_context:
    description: 'Pass context `github` into an external action. Default is global context `github`.'
    required: false
    default: ${{ toJSON( github ) }}
  job_context:
    description: 'Pass context `job` into an external action. Default is context `job` of a job.'
    required: false
    default: ${{ toJSON( job ) }}
  matrix_context:
    description: 'Pass context `matrix` into an external action. Default is context `matrix` of a job.'
    required: false
    default: ${{ toJSON( matrix ) }}
  attempt_limit:
    description: 'Number of attempts'
    required: false
    default: 2
  attempt_delay:
    description: 'A delay between attempts in ms'
    required: false
    default: 0
  disable_pre_and_post:
    description: 'Disable Pre and Post hooks'
    required: false
    default: 'false'
runs:
  using: 'node16'
  pre: 'src/Pre.js'
  main: 'src/Main.js'
  post: 'src/Post.js'
